var notificationsFromTable=function(){var e=new Set;const t="Pretius Notifications from table - ",s=apex.debug.LOG_LEVEL.INFO;function i(n){const a=n.callbackInterval,o=n.ajaxIdentifier,r=n.renderTime-a,c=function(e){const t=e=>e.toString().padStart(2,"0");return`${t(e.getDate())}-${t(e.getMonth()+1)}-${e.getFullYear()} ${t(e.getHours())}:${t(e.getMinutes())}:${t(e.getSeconds())}`}(new Date(r)),g=null!=n.settings&&n.settings.indexOf("EXECUTE_PLSQL")>-1,u=null!=n.settings&&n.settings.indexOf("TRIGGER_EVENT")>-1;apex.debug.message(s,t,"Fetching notifications..."),apex.server.plugin(o,{x01:"GET_NOTIFICATIONS",x03:c},{dataType:"json",success:function(i){let n=JSON.parse(i.data),r=[];apex.debug.message(s,t,"Fetched: ",n.items.length," notification(s)"),apex.event.trigger("body","notifications-from-table--fetchsuccess"),n&&n.items.length>0?(n.items.forEach((function(i){i.id&&!e.has(i.id)&&(e.add(i.id),null!=i.type&&i.type&&(i.type&&"success"===i.type.toLowerCase()?apex.message.showPageSuccess(i.message):i.type&&"error"===i.type.toLowerCase()&&r.push({type:"error",location:"page",message:i.message,unsafe:!1})),u&&apex.event.trigger("body",i.event_name||"",{notificationId:i.id,type:i.type,message:i.message}),g&&setTimeout((function(){apex.debug.message(s,t,"Notification to be processed: ",i.id),apex.server.plugin(o,{x01:"EXECUTE_PLSQL",x02:i.id},{success:function(){apex.event.trigger("body","notifications-from-table--plsqlsuccess"),apex.debug.message(s,t,"Notification processed successfully: ",i.id)},error:function(e,s,n){apex.debug.error(t,"Error processing notification ",i.id,": ",s,n)}})}),a))})),r.length>0&&(apex.message.clearErrors(),apex.message.showErrors(r))):apex.debug.message(s,t,"No new notifications to display")},error:function(e,s,i){apex.debug.error(t,"Error fetching notifications:",s,i)}}),setTimeout((function(){i(n)}),a)}return{start:function(e){apex.debug.message(s,t,"initialization"),i(e)}}}();